(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,r:()=>s});var r=a(5155);a(2115);var o=a(9708),d=a(2085),n=a(9434);let s=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:a,size:d,asChild:i=!1,...l}=e,c=i?o.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,n.cn)(s({variant:a,size:d,className:t})),...l})}},1664:(e,t,a)=>{"use strict";a.d(t,{s:()=>r});let r={BARBER:{GET:"/get-employee"},SERVICE:{GET:"/get-service"},BOOKING:{BOOK:"/book",ALL_GET:"/allAppointment",GET_BY_GET:e=>"/my/".concat(e)},ADMIN:{BARBER:{ADD:"/add-employee",DELETE:e=>"/delete-employee/".concat(e)},SERVICE:{DELETE:e=>"/delete-service/".concat(e),ADD:"/add-service"}}}},4003:(e,t,a)=>{Promise.resolve().then(a.bind(a,5859))},5859:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(5155),o=a(2115),d=a(2355),n=a(3052),s=a(1178),i=a(9434),l=a(285);function c(e){let{className:t,classNames:a,showOutsideDays:o=!0,...c}=e;return(0,r.jsx)(s.hv,{showOutsideDays:o,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:(0,i.cn)((0,l.r)({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,i.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===c.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,i.cn)((0,l.r)({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,r.jsx)(d.A,{className:(0,i.cn)("size-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,r.jsx)(n.A,{className:(0,i.cn)("size-4",t),...a})}},...c})}var u=a(8950),g=a(4540),p=a(6877),m=a(5695);let v=()=>{let e=[],t=new Date;t.setHours(9,0,0,0);let a=new Date;for(a.setHours(21,0,0,0);t<=a;){let a=t.getHours(),r=t.getMinutes(),o=(a%12==0?12:a%12)+":"+(r<10?"0"+r:r)+(a<12?" AM":" PM");e.push(o),t.setMinutes(t.getMinutes()+30)}return e},f=()=>{let[e,t]=(0,o.useState)(new Date),[a,d]=(0,o.useState)(!1),[n,s]=(0,o.useState)([]),[i,f]=(0,o.useState)([]),x=(0,g.wA)(),h=(0,m.useRouter)(),b=v();(0,o.useEffect)(()=>{e&&localStorage.setItem("date",JSON.stringify(e.toISOString())),localStorage.setItem("timeslots",JSON.stringify(n))},[e,n]);let y=e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,r.jsxs)("div",{className:"bg-[#1B1B1A] min-h-screen p-6 flex flex-col justify-center items-center text-white space-y-8",children:[(0,r.jsx)(c,{mode:"single",selected:e,onSelect:e=>{t(e),s([]),d(!0);let a=JSON.parse(localStorage.getItem("appointments")||"[]"),r=null==e?void 0:e.toISOString().split("T")[0];f(a.filter(e=>e.date===r).map(e=>e.timeSlot))},className:"rounded-xl border border-[#494831] bg-[#252525] text-white shadow-md scale-150"}),(0,r.jsx)(u._s,{open:a,onOpenChange:d,children:(0,r.jsxs)(u.zj,{className:"bg-[#2B2B2B] text-white border-t border-[#757442] px-4 pt-4 pb-2 rounded-t-2xl",children:[(0,r.jsxs)(u.BE,{children:[(0,r.jsx)(u.gk,{className:"text-[#D6D7D6] text-lg font-semibold",children:"Choose Time Slot(s)"}),(0,r.jsx)(u.I6,{className:"text-sm text-gray-400",children:null==e?void 0:e.toDateString()})]}),(0,r.jsx)("div",{className:"grid grid-cols-10 gap-2 px-1 py-1",children:b.map((e,t)=>{let a=i.includes(e);return(0,r.jsx)(l.$,{variant:"ghost",disabled:a,className:"text-sm py-1 px-1 rounded-lg border ".concat(n.includes(e)?"bg-[#757442] text-black":"border-[#757442] text-white hover:bg-[#3c3c3c]"," ").concat(a?"opacity-50 cursor-not-allowed":""),onClick:()=>!a&&y(e),children:e},t)})}),(0,r.jsxs)(u.tb,{className:"px-1 pt-1",children:[(0,r.jsx)(l.$,{onClick:()=>{let e=localStorage.getItem("userId"),t=localStorage.getItem("barberId"),a=JSON.parse(localStorage.getItem("serviceId")||"[]"),r=Number(localStorage.getItem("price")),o=localStorage.getItem("date");if(!e||!t||!a.length||!o||!n.length||!r){alert("Missing required fields.");return}let s={userId:e,barberId:t,serviceId:a,date:o,timeSlot:n[0],price:r,status:"pending",paymentStatus:"unpaid"};console.log("Sending payload:",s),x((0,p.gG)(s)),d(!1),localStorage.clear(),h.push("/displaybookings")},className:"bg-[#757442] text-black w-full",children:"Confirm"}),(0,r.jsx)(u.cp,{asChild:!0,children:(0,r.jsx)(l.$,{variant:"outline",className:"border-[#757442] text-black w-full hover:bg-[#3c3c3c]",children:"Cancel"})})]})]})})]})}},6877:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>u,ZS:()=>i,gG:()=>n});var r=a(1664),o=a(1990),d=a(3464);let n=(0,o.zD)("appointment/create",async(e,t)=>{let{rejectWithValue:a}=t;try{return(await d.A.post("http://localhost:5001/api".concat(r.s.BOOKING.BOOK),e)).data}catch(e){var o,n;return a((null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)||"Failed to create appointment")}}),s=(0,o.zD)("appointment/getAllAppointments",async(e,t)=>{let{rejectWithValue:a}=t;try{return(await d.A.get("http://localhost:5001/api".concat(r.s.BOOKING.ALL_GET))).data}catch(e){var o,n;return a((null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)||"Failed to fetch all appointments")}}),i=(0,o.zD)("appointment/getMyBookings",async(e,t)=>{let{rejectWithValue:a}=t;try{return(await d.A.get("http://localhost:5001/api".concat(r.s.BOOKING.GET_BY_GET(e)))).data}catch(e){var o,n;return a((null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)||"Failed to fetch bookings")}}),l=(0,o.Z0)({name:"appointment",initialState:{appointment:null,loading:!1,error:null,success:!1,myBookings:[],allBookings:[]},reducers:{resetAppointment:e=>{e.loading=!1,e.success=!1,e.error=null,e.appointment=null}},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null,e.success=!1}).addCase(n.fulfilled,(e,t)=>{e.loading=!1,e.success=!0,e.appointment=t.payload}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.success=!1,e.error=t.payload||"Something went wrong"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.myBookings=t.payload}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to fetch bookings"}).addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.myBookings=t.payload}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Failed to fetch all appointments"})}}),{resetAppointment:c}=l.actions,u=l.reducer},8950:(e,t,a)=>{"use strict";a.d(t,{BE:()=>g,I6:()=>v,Uz:()=>s,_s:()=>n,cp:()=>l,gk:()=>m,tb:()=>p,zj:()=>u});var r=a(5155);a(2115);var o=a(4451),d=a(9434);function n(e){let{...t}=e;return(0,r.jsx)(o._s.Root,{"data-slot":"drawer",...t})}function s(e){let{...t}=e;return(0,r.jsx)(o._s.Trigger,{"data-slot":"drawer-trigger",...t})}function i(e){let{...t}=e;return(0,r.jsx)(o._s.Portal,{"data-slot":"drawer-portal",...t})}function l(e){let{...t}=e;return(0,r.jsx)(o._s.Close,{"data-slot":"drawer-close",...t})}function c(e){let{className:t,...a}=e;return(0,r.jsx)(o._s.Overlay,{"data-slot":"drawer-overlay",className:(0,d.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,children:a,...n}=e;return(0,r.jsxs)(i,{"data-slot":"drawer-portal",children:[(0,r.jsx)(c,{}),(0,r.jsxs)(o._s.Content,{"data-slot":"drawer-content",className:(0,d.cn)("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...n,children:[(0,r.jsx)("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),a]})]})}function g(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"drawer-header",className:(0,d.cn)("flex flex-col gap-1.5 p-4",t),...a})}function p(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"drawer-footer",className:(0,d.cn)("mt-auto flex flex-col gap-2 p-4",t),...a})}function m(e){let{className:t,...a}=e;return(0,r.jsx)(o._s.Title,{"data-slot":"drawer-title",className:(0,d.cn)("text-foreground font-semibold",t),...a})}function v(e){let{className:t,...a}=e;return(0,r.jsx)(o._s.Description,{"data-slot":"drawer-description",className:(0,d.cn)("text-muted-foreground text-sm",t),...a})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>d});var r=a(2596),o=a(9688);function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[464,635,149,715,441,684,358],()=>t(4003)),_N_E=e.O()}]);